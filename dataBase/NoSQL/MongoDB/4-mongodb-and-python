# the standard MongoDB driver library for Python
python -m venv myenv
source env/bin/activate
python -m pip install "pymongo[srv]"

# create mongodb cluster from atlas

# creating the mongodb client
from pymongo import MongoClient
def get_database():
    connection_str = "atlasURLtoConnect"
    "mongodb+srv://user:pass@cluster.mongodb.net/myfirstDB"
    client = MongoClient(connection_str) 
    # Create the database
    # MongoDB doesnâ€™t create a database until you have
    # collections and documents in it. 
    return client['user_shopping_list']

if __name__ == '__main__':
    dbname = get_database()

# To create a collection, pass the collection name to the database
from pymongo_get_database import get_database
dbname = get_database()
collection_name = dbname["user_1_items"]
# This creates a collection named user_1_items in the user_shopping_list database.

# inserting
# for example you already have some python dictionaries
collection_name.insert_many([dict1, dict2])
collection_name.insert_one(dict3)

# to add date useing pyMongo we use dateutil package
python -m pip install python-dateutil

from dateutil import parser
expiry_date = '2021-07-13T00:00:00.000Z'
expiry = parser.parse(expiry_date)
# now you can use 'expiry' variable as the value of one of 
# your dictionary keys that you will add to the db

# to query and retrieve
from pymongo_get_database import get_database
dbname = get_database()
collection_name = dbname["user_1_items"]
item_details = collection_name.find()
for item in item_details:
    print(item)